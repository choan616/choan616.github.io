import{j as e}from"./index-D1XZtA4z.js";import{r as n}from"./vendor-ui-CGZmARxJ.js";import"./vendor-react-qkC6yhPU.js";import"./vendor-db-CzqAUFpF.js";import"./vendor-utils-BGkSQjfT.js";const m=({blob:r,alt:o})=>{const[c,t]=n.useState("");return n.useEffect(()=>{if(!r)return;const i=URL.createObjectURL(r);return t(i),()=>URL.revokeObjectURL(i)},[r]),c?e.jsx("img",{src:c,alt:o,loading:"lazy"}):e.jsx("div",{className:"gallery-image-placeholder"})};function p({entries:r,onEntryClick:o,onClose:c}){const t=n.useMemo(()=>{if(!r)return[];const s=[];return r.forEach(l=>{l.images&&l.images.length>0&&l.images.forEach(a=>{s.push({id:a.id,blob:a.thumbnail||a.blob,date:l.date,title:l.title,imageCount:l.images.length})})}),s.sort((l,a)=>new Date(a.date)-new Date(l.date))},[r]),i=n.useMemo(()=>{const s={};return t.forEach(l=>{const a=new Date(l.date),d=`${a.getFullYear()}ë…„ ${a.getMonth()+1}ì›”`;s[d]||(s[d]=[]),s[d].push(l)}),s},[t]);return t.length===0?e.jsxs("div",{className:"gallery-empty",children:[e.jsx("div",{className:"gallery-empty-icon",children:"ðŸ–¼ï¸"}),e.jsx("p",{children:"ì‚¬ì§„ì´ í¬í•¨ëœ ì¼ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤."}),e.jsx("button",{className:"btn-back-diary",onClick:c,children:"ì¼ê¸° ì“°ëŸ¬ ê°€ê¸°"})]}):e.jsxs("div",{className:"image-gallery-container",children:[e.jsxs("div",{className:"gallery-header",children:[e.jsxs("div",{className:"gallery-title-area",children:[e.jsx("h2",{children:"ì‚¬ì§„ ëª¨ì•„ë³´ê¸°"}),e.jsxs("span",{className:"gallery-count",children:["ì´ ",t.length,"ìž¥"]})]}),e.jsx("button",{className:"gallery-close-btn",onClick:c,"aria-label":"ë‹«ê¸°",children:"âœ•"})]}),e.jsx("div",{className:"gallery-content",children:Object.entries(i).map(([s,l])=>e.jsxs("div",{className:"gallery-group",children:[e.jsx("h3",{className:"gallery-group-title",children:s}),e.jsx("div",{className:"gallery-grid",children:l.map(a=>e.jsx("div",{className:"gallery-item",onClick:()=>o(a.date),title:`${a.date} ì¼ê¸° ë³´ê¸°`,children:e.jsxs("div",{className:"gallery-image-wrapper",children:[e.jsx(m,{blob:a.blob,alt:a.title}),a.imageCount>1&&e.jsxs("span",{className:"gallery-multi-icon",children:["+",a.imageCount-1]})]})},a.id))})]},s))})]})}export{p as ImageGallery};
