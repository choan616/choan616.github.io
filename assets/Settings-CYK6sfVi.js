const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CX3SO-je.js","assets/vendor-ui-DN8AIPDC.js","assets/vendor-react-BSeQcPOp.js","assets/vendor-utils-CQTT7NqD.js","assets/vendor-db-BYKdQBNe.js","assets/index-2Wwab8QO.css"])))=>i.map(i=>d[i]);
import{s as c,u as w,a as P,g as f,j as s,_ as o}from"./index-CX3SO-je.js";import{r as d}from"./vendor-ui-DN8AIPDC.js";import"./vendor-react-BSeQcPOp.js";import"./vendor-db-BYKdQBNe.js";import"./vendor-utils-CQTT7NqD.js";function k({onClose:h}){const[a,x]=d.useState(c.getAll()),{currentUserId:j}=w(),[l,m]=d.useState(""),{showToast:t}=P(),r=j||f();d.useEffect(()=>{const e=n=>{x(n)};return c.addListener(e),()=>c.removeListener(e)},[]);const g=e=>{c.set(e,!a[e])},u=(e,n)=>{c.set(e,n)},N=async()=>{if(window.confirm(`정말로 모든 데이터를 초기화하시겠습니까?

⚠️ 이 작업은 되돌릴 수 없으며, 기기에 저장된 모든 일기와 사진이 영구적으로 삭제됩니다!`)&&window.confirm("마지막 경고입니다. 정말로 모든 데이터를 삭제하시겠습니까?"))try{const{importData:e}=await o(async()=>{const{importData:n}=await import("./index-CX3SO-je.js").then(i=>i.b);return{importData:n}},__vite__mapDeps([0,1,2,3,4,5]));await e({entries:[],images:[]},!1),t("모든 데이터가 초기화되었습니다.","success"),window.location.reload()}catch(e){console.error("초기화 오류:",e),t("초기화 실패","error")}},p=async()=>{if(!/^\d{4}$/.test(l)){t("4자리 숫자 PIN을 입력하세요.","warning");return}if(!r){t("사용자 정보가 없습니다. 다시 로그인해 주세요.","error");return}const{setPin:e}=await o(async()=>{const{setPin:n}=await import("./index-CX3SO-je.js").then(i=>i.b);return{setPin:n}},__vite__mapDeps([0,1,2,3,4,5]));try{await e(r,l),t("PIN이 성공적으로 변경되었습니다.","success"),m("")}catch(n){console.error("PIN 변경 오류",n),t("PIN 변경에 실패했습니다.","error")}},v=async()=>{if(!r){t("사용자 정보가 없습니다. 다시 로그인해 주세요.","error");return}if(!window.confirm("정말로 PIN을 삭제하시겠습니까?"))return;const{clearPin:e}=await o(async()=>{const{clearPin:n}=await import("./index-CX3SO-je.js").then(i=>i.b);return{clearPin:n}},__vite__mapDeps([0,1,2,3,4,5]));try{await e(r),t("PIN이 삭제되었습니다.","success")}catch(n){console.error("PIN 삭제 오류",n),t("PIN 삭제에 실패했습니다.","error")}},b=e=>{const n=e.target.value.replace(/\D/g,"").slice(0,4);m(n)};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"settings-overlay",onClick:h}),s.jsxs("div",{className:"settings-modal",children:[s.jsxs("div",{className:"settings-header",children:[s.jsx("h2",{children:"⚙️ 설정"}),s.jsx("button",{className:"close-btn",onClick:h,children:"✕"})]}),s.jsxs("div",{className:"settings-content",children:[s.jsxs("section",{className:"settings-section",children:[s.jsx("h3",{children:"동기화 설정"}),s.jsxs("div",{className:"setting-item",children:[s.jsxs("div",{className:"setting-info",children:[s.jsx("span",{className:"setting-label",children:"자동 동기화"}),s.jsx("span",{className:"setting-desc",children:"앱을 사용할 때 주기적으로 동기화합니다."})]}),s.jsxs("label",{className:"switch",children:[s.jsx("input",{type:"checkbox",checked:a.autoSyncEnabled,onChange:()=>g("autoSyncEnabled")}),s.jsx("span",{className:"slider round"})]})]}),a.autoSyncEnabled&&s.jsxs("div",{className:"setting-item",children:[s.jsxs("div",{className:"setting-info",children:[s.jsx("span",{className:"setting-label",children:"동기화 주기"}),s.jsx("span",{className:"setting-desc",children:"얼마나 자주 동기화할지 선택하세요."})]}),s.jsxs("select",{value:a.syncInterval,onChange:e=>u("syncInterval",Number(e.target.value)),className:"setting-select",children:[s.jsx("option",{value:10,children:"10분마다"}),s.jsx("option",{value:30,children:"30분마다"}),s.jsx("option",{value:60,children:"1시간마다"}),s.jsx("option",{value:360,children:"6시간마다"})]})]}),s.jsxs("div",{className:"setting-item",children:[s.jsxs("div",{className:"setting-info",children:[s.jsx("span",{className:"setting-label",children:"Wi-Fi에서만 동기화"}),s.jsx("span",{className:"setting-desc",children:"모바일 데이터 사용을 제한합니다."})]}),s.jsxs("label",{className:"switch",children:[s.jsx("input",{type:"checkbox",checked:a.wifiOnly,onChange:()=>g("wifiOnly")}),s.jsx("span",{className:"slider round"})]}),!(navigator.connection||navigator.mozConnection||navigator.webkitConnection)&&s.jsx("div",{className:"setting-warning",children:"⚠️ 이 기기에서는 네트워크 유형을 확인할 수 없어 항상 동기화됩니다."})]})]}),s.jsxs("section",{className:"settings-section",children:[s.jsx("h3",{children:"데이터 관리"}),s.jsxs("div",{className:"setting-item danger-zone",children:[s.jsxs("div",{className:"setting-info",children:[s.jsx("span",{className:"setting-label text-danger",children:"데이터 초기화"}),s.jsx("span",{className:"setting-desc",children:"기기에 저장된 모든 일기와 사진을 삭제합니다."})]}),s.jsx("button",{className:"btn btn-danger btn-small",onClick:N,children:"초기화"})]})]}),s.jsxs("section",{className:"settings-section",children:[s.jsx("h3",{children:"보안 PIN"}),s.jsxs("div",{className:"setting-item",children:[s.jsxs("div",{className:"setting-info",children:[s.jsx("span",{className:"setting-label",children:"PIN 변경"}),s.jsx("span",{className:"setting-desc",children:"현재 사용자 계정의 4자리 PIN을 변경하거나 삭제합니다."})]}),s.jsxs("div",{className:"pin-controls flex items-center space-x-2",children:[s.jsx("input",{value:l,onChange:b,placeholder:"0000",inputMode:"numeric",maxLength:"4"}),s.jsx("button",{className:"btn btn-primary btn-small",onClick:p,children:"변경"}),s.jsx("button",{className:"btn btn-danger btn-small",onClick:v,children:"삭제"})]})]})]}),s.jsxs("section",{className:"settings-section",children:[s.jsx("h3",{children:"앱 정보"}),s.jsxs("div",{className:"app-info",children:[s.jsx("p",{children:"버전: 1.2.0 (Phase 4)"}),s.jsx("p",{children:"개발: Antigravity Agent"})]})]})]})]})]})}export{k as Settings};
